{"ast":null,"code":"import _classCallCheck from\"/home/osroot/Desktop/host/contacts-front/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/osroot/Desktop/host/contacts-front/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/osroot/Desktop/host/contacts-front/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/osroot/Desktop/host/contacts-front/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var readFileAsDataURL=function readFileAsDataURL(file){return new Promise(function(resolve){var reader=new FileReader();reader.onload=function(event){resolve(event.target.result);};reader.readAsDataURL(file);});};var resizeImage=function resizeImage(imageURL,canvas,maxHeight){return new Promise(function(resolve){var image=new Image();image.onload=function(){var context=canvas.getContext('2d');if(image.height>maxHeight){image.width*=maxHeight/image.height;image.height=maxHeight;}context.clearRect(0,0,canvas.width,canvas.height);canvas.width=image.width;canvas.height=image.height;context.drawImage(image,0,0,image.width,image.height);resolve(canvas.toDataURL('image/jpeg'));};image.src=imageURL;});};/**\n * A custom <input> that dynamically reads and resizes image files before\n * submitting them to the server as data URLs. Also, shows a preview of the image.\n */var ImageInput=/*#__PURE__*/function(_React$Component){_inherits(ImageInput,_React$Component);var _super=_createSuper(ImageInput);function ImageInput(){var _this;_classCallCheck(this,ImageInput);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={value:''};_this.handleFileChange=function(event){var file=event.target.files[0];if(file&&file.type.match(/^image\\//)){readFileAsDataURL(file).then(function(originalURL){resizeImage(originalURL,_this.canvas,_this.props.maxHeight).then(function(url){_this.setState({value:url});});});}else{_this.setState({value:''});}};_this.handleFormReset=function(){_this.setState({value:''});};return _this;}_createClass(ImageInput,[{key:\"componentDidMount\",value:function componentDidMount(){this.canvas=document.createElement('canvas');this.fileInput.form.addEventListener('reset',this.handleFormReset);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.fileInput.form.removeEventListener('reset',this.handleFormReset);}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,className=_this$props.className,name=_this$props.name;var value=this.state.value;var style={position:'relative'};if(value){style.backgroundImage=\"url(\\\"\".concat(value,\"\\\")\");style.backgroundRepeat='no-repeat';style.backgroundPosition='center';style.backgroundSize='cover';}return/*#__PURE__*/_jsxs(\"div\",{className:className,style:style,children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:name,value:value}),/*#__PURE__*/_jsx(\"input\",{ref:function ref(node){return _this2.fileInput=node;},type:\"file\",onChange:this.handleFileChange,style:{position:'absolute',top:0,left:0,width:'100%',height:'100%',opacity:0}})]});}}]);return ImageInput;}(React.Component);export default ImageInput;","map":{"version":3,"names":["React","readFileAsDataURL","file","Promise","resolve","reader","FileReader","onload","event","target","result","readAsDataURL","resizeImage","imageURL","canvas","maxHeight","image","Image","context","getContext","height","width","clearRect","drawImage","toDataURL","src","ImageInput","state","value","handleFileChange","files","type","match","then","originalURL","props","url","setState","handleFormReset","document","createElement","fileInput","form","addEventListener","removeEventListener","className","name","style","position","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","node","top","left","opacity","Component"],"sources":["/home/osroot/Desktop/host/contacts-front/src/ImageInput.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst readFileAsDataURL = (file) =>\n  new Promise(resolve => {\n    const reader = new FileReader()\n\n    reader.onload = (event) => {\n      resolve(event.target.result)\n    }\n\n    reader.readAsDataURL(file)\n  })\n\nconst resizeImage = (imageURL, canvas, maxHeight) =>\n  new Promise(resolve => {\n    const image = new Image()\n\n    image.onload = () => {\n      const context = canvas.getContext('2d')\n\n      if (image.height > maxHeight) {\n        image.width *= maxHeight / image.height\n        image.height = maxHeight\n      }\n\n      context.clearRect(0, 0, canvas.width, canvas.height)\n      canvas.width = image.width\n      canvas.height = image.height\n\n      context.drawImage(image, 0, 0, image.width, image.height)\n\n      resolve(canvas.toDataURL('image/jpeg'))\n    }\n\n    image.src = imageURL\n  })\n\n/**\n * A custom <input> that dynamically reads and resizes image files before\n * submitting them to the server as data URLs. Also, shows a preview of the image.\n */\nclass ImageInput extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    name: PropTypes.string,\n    maxHeight: PropTypes.number\n  }\n\n  state = {\n    value: ''\n  }\n\n  handleFileChange = (event) => {\n    const file = event.target.files[0]\n\n    if (file && file.type.match(/^image\\//)) {\n      readFileAsDataURL(file).then(originalURL => {\n        resizeImage(originalURL, this.canvas, this.props.maxHeight).then(url => {\n          this.setState({ value: url })\n        })\n      })\n    } else {\n      this.setState({ value: '' })\n    }\n  }\n\n  handleFormReset = () => {\n    this.setState({ value: '' })\n  }\n\n  componentDidMount() {\n    this.canvas = document.createElement('canvas')\n    this.fileInput.form.addEventListener('reset', this.handleFormReset)\n  }\n\n  componentWillUnmount() {\n    this.fileInput.form.removeEventListener('reset', this.handleFormReset)\n  }\n\n  render() {\n    const { className, name } = this.props\n    const { value } = this.state\n\n    const style = {\n      position: 'relative'\n    }\n\n    if (value) {\n      style.backgroundImage = `url(\"${value}\")`\n      style.backgroundRepeat = 'no-repeat'\n      style.backgroundPosition = 'center'\n      style.backgroundSize = 'cover'\n    }\n\n    return (\n      <div className={className} style={style}>\n        <input type=\"hidden\" name={name} value={value} />\n        <input\n          ref={node => this.fileInput = node}\n          type=\"file\"\n          onChange={this.handleFileChange}\n          style={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            width: '100%',\n            height: '100%',\n            opacity: 0\n          }}\n        />\n      </div>\n    )\n  }\n}\n\nexport default ImageInput\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}